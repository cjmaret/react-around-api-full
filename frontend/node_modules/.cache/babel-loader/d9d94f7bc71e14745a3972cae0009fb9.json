{"ast":null,"code":"import _classCallCheck from\"/Users/colinmaretsky/dev/react-around-api-full/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/colinmaretsky/dev/react-around-api-full/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";var Api=/*#__PURE__*/function(){function Api(_ref){var baseUrl=_ref.baseUrl,headers=_ref.headers;_classCallCheck(this,Api);this._baseUrl=baseUrl;this._headers=headers;}_createClass(Api,[{key:\"_returnRes\",value:function _returnRes(res){if(res.ok){return res.json();}else{return Promise.reject(\"Error: \".concat(res.status));}}},{key:\"getCardList\",value:function getCardList(){var _this=this;return fetch(this._baseUrl+'/cards',{method:\"GET\",headers:this._headers}).then(function(res){return _this._returnRes(res);});}},{key:\"getUserInfo\",value:function getUserInfo(){var _this2=this;return fetch(this._baseUrl+'/users/me',{method:\"GET\",headers:this._headers}).then(function(res){return _this2._returnRes(res);});}},{key:\"addLike\",value:function addLike(cardId){var _this3=this;return fetch(this._baseUrl+'/cards/likes/'+cardId,{method:\"PUT\",headers:this._headers}).then(function(res){return _this3._returnRes(res);});}},{key:\"removeLike\",value:function removeLike(cardId){var _this4=this;return fetch(this._baseUrl+'/cards/likes/'+cardId,{method:\"DELETE\",headers:this._headers}).then(function(res){return _this4._returnRes(res);});}},{key:\"changeLikeCardStatus\",value:function changeLikeCardStatus(cardId,isLiked){if(!isLiked){this.addLike(cardId);}else{this.removeLike(cardId);}}},{key:\"removeCard\",value:function removeCard(cardId){var _this5=this;return fetch(this._baseUrl+'/cards/'+cardId,{method:\"DELETE\",headers:this._headers}).then(function(res){return _this5._returnRes(res);});}},{key:\"setUserInfo\",value:function setUserInfo(_ref2){var _this6=this;var name=_ref2.name,about=_ref2.about;return fetch(this._baseUrl+'/users/me',{method:\"PATCH\",headers:this._headers,body:JSON.stringify({name:name,about:about})}).then(function(res){return _this6._returnRes(res);});}},{key:\"setUserAvatar\",value:function setUserAvatar(avatar){var _this7=this;return fetch(this._baseUrl+'/users/me/avatar',{method:\"PATCH\",headers:this._headers,body:JSON.stringify({avatar:avatar})}).then(function(res){return _this7._returnRes(res);});}},{key:\"addCard\",value:function addCard(_ref3){var _this8=this;var name=_ref3.name,link=_ref3.link;return fetch(this._baseUrl+'/cards',{method:\"POST\",headers:this._headers,body:JSON.stringify({name:name,link:link})}).then(function(res){return _this8._returnRes(res);});}}]);return Api;}();var api=new Api({baseUrl:\"https://around.nomoreparties.co/v1/group-12\",headers:{authorization:\"Bearer \".concat(token),\"Content-Type\":\"application/json\"}});export default api;","map":{"version":3,"sources":["/Users/colinmaretsky/dev/react-around-api-full/frontend/src/utils/api.js"],"names":["Api","baseUrl","headers","_baseUrl","_headers","res","ok","json","Promise","reject","status","fetch","method","then","_returnRes","cardId","isLiked","addLike","removeLike","name","about","body","JSON","stringify","avatar","link","api","authorization","token"],"mappings":"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","sourcesContent":["class Api {\n    constructor({ baseUrl, headers }) {\n        this._baseUrl = baseUrl;\n        this._headers = headers;\n    }\n\n    _returnRes(res) {\n        if (res.ok) {\n            return res.json();\n        } else {\n            return Promise.reject(`Error: ${res.status}`);\n        }\n    }\n\n    getCardList() {\n        return fetch(this._baseUrl + '/cards', {\n            method: \"GET\",\n            headers: this._headers,\n        })\n            .then(res => {\n                return this._returnRes(res);\n            })\n    }\n\n    getUserInfo() {\n        return fetch(this._baseUrl + '/users/me', {\n            method: \"GET\",\n            headers: this._headers,\n        })\n            .then(res => {\n                return this._returnRes(res);\n            })\n    }\n\n    addLike(cardId) {\n        return fetch(this._baseUrl + '/cards/likes/' + cardId, {\n            method: \"PUT\",\n            headers: this._headers,\n        })\n            .then(res => {\n                return this._returnRes(res);\n            })\n    }\n\n    removeLike(cardId) {\n        return fetch(this._baseUrl + '/cards/likes/' + cardId, {\n            method: \"DELETE\",\n            headers: this._headers,\n        })\n            .then(res => {\n                return this._returnRes(res);\n            })\n    }\n\n    changeLikeCardStatus(cardId, isLiked) {\n        if (!isLiked) {\n            this.addLike(cardId);\n        } else {\n            this.removeLike(cardId);\n        }\n    }\n\n    removeCard(cardId) {\n        return fetch(this._baseUrl + '/cards/' + cardId, {\n            method: \"DELETE\",\n            headers: this._headers,\n        })\n            .then(res => {\n                return this._returnRes(res);\n            })\n    }\n\n    setUserInfo({ name, about }) {\n        return fetch(this._baseUrl + '/users/me', {\n            method: \"PATCH\",\n            headers: this._headers,\n            body: JSON.stringify({\n                name,\n                about\n            })\n        })\n            .then(res => {\n                return this._returnRes(res);\n            })\n    }\n\n    setUserAvatar(avatar) {\n        return fetch(this._baseUrl + '/users/me/avatar', {\n            method: \"PATCH\",\n            headers: this._headers,\n            body: JSON.stringify({\n                avatar: avatar,\n            })\n        })\n            .then(res => {\n                return this._returnRes(res);\n            });\n    }\n\n    addCard({ name, link }) {\n        return fetch(this._baseUrl + '/cards', {\n            method: \"POST\",\n            headers: this._headers,\n            body: JSON.stringify({\n                name,\n                link\n            })\n        })\n            .then(res => {\n                return this._returnRes(res);\n            })\n    }\n\n\n}\n\nconst api = new Api({\n    baseUrl: \"https://around.nomoreparties.co/v1/group-12\",\n    headers: {\n        authorization: `Bearer ${token}`,\n        \"Content-Type\": \"application/json\"\n    }\n});\n\nexport default api;"]},"metadata":{},"sourceType":"module"}