{"ast":null,"code":"var _jsxFileName = \"/Users/colinmaretsky/dev/react-around-auth/src/components/App.js\",\n    _s = $RefreshSig$();\n\nimport React from 'react';\nimport Header from './Header';\nimport Main from './Main';\nimport Footer from './Footer';\nimport EditProfilePopup from './EditProfilePopup';\nimport AddPlacePopup from './AddPlacePopup';\nimport EditAvatarPopup from './EditAvatarPopup';\nimport DeleteCardPopup from './DeleteCardPopup';\nimport ImagePopup from './ImagePopup';\nimport api from '../utils/api';\nimport { CurrentUserContext } from '../contexts/CurrentUserContext';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nfunction App() {\n  _s();\n\n  const [isEditProfilePopupOpen, setIsEditProfilePopupOpen] = React.useState(false);\n  const [isAddPlacePopupOpen, setIsAddPlacePopupOpen] = React.useState(false);\n  const [isEditAvatarPopupOpen, setIsEditAvatarPopupOpen] = React.useState(false);\n  const [isDeleteCardPopupOpen, setIsDeleteCardPopupOpen] = React.useState(false);\n  const [selectedCard, setSelectedCard] = React.useState();\n  const [currentUser, setCurrentUser] = React.useState();\n  const [cards, setCards] = React.useState([]);\n  const [isLoading, setIsLoading] = React.useState(false);\n  const [cardToDelete, setCardToDelete] = React.useState();\n  React.useEffect(() => {\n    api.getUserInfo().then(res => {\n      setCurrentUser(res);\n    }).catch(err => console.log(err));\n  }, []);\n\n  function handleEditProfileClick() {\n    setIsLoading(false);\n    setIsEditProfilePopupOpen(true);\n  }\n\n  function handleAddPlaceClick() {\n    setIsLoading(false);\n    setIsAddPlacePopupOpen(true);\n  }\n\n  function handleEditAvatarClick() {\n    setIsLoading(false);\n    setIsEditAvatarPopupOpen(true);\n  }\n\n  function handleDeleteCardClick(clickedCard) {\n    setIsLoading(false);\n    setIsDeleteCardPopupOpen(true);\n    setCardToDelete(clickedCard);\n  }\n\n  function closeAllPopups() {\n    setIsEditProfilePopupOpen(false);\n    setIsAddPlacePopupOpen(false);\n    setIsEditAvatarPopupOpen(false);\n    setIsDeleteCardPopupOpen(false);\n    setSelectedCard();\n  }\n\n  function handleCardClick(clickedCard) {\n    setSelectedCard(clickedCard);\n  }\n\n  function handleUpdateUser(info) {\n    api.setUserInfo(info).then(res => {\n      setCurrentUser(res);\n      closeAllPopups();\n    }).catch(err => console.log(err));\n  }\n\n  function handleUpdateAvatar(info) {\n    api.setUserAvatar(info).then(res => {\n      setCurrentUser(res);\n      closeAllPopups();\n    }).catch(err => console.log(err));\n  }\n\n  function handleAddPlaceSubmit({\n    link,\n    name\n  }) {\n    api.addCard({\n      link,\n      name\n    }).then(newCard => {\n      setCards([newCard, ...cards]);\n      closeAllPopups();\n    }).catch(err => console.log(err));\n  }\n\n  React.useEffect(() => {\n    api.getCardList().then(res => {\n      setCards(res);\n    }).catch(err => console.log(err));\n  }, []);\n\n  function handleCardLike(card) {\n    const isLiked = card.likes.some(i => i._id === (currentUser === null || currentUser === void 0 ? void 0 : currentUser._id));\n\n    if (!isLiked) {\n      api.addLike(card._id, !isLiked).then(newCard => {\n        setCards(state => state.map(c => c._id === card._id ? newCard : c));\n      }).catch(err => console.log(err));\n    } else {\n      api.removeLike(card._id, !isLiked).then(newCard => {\n        setCards(state => state.map(c => c._id === card._id ? newCard : c));\n      }).catch(err => console.log(err));\n    }\n  }\n\n  function handleCardDelete(card) {\n    api.removeCard(card._id).then(() => {\n      setCards(state => state.filter(c => c._id !== card._id));\n      closeAllPopups();\n    }).catch(err => console.log(err));\n  }\n\n  function handleChangeButtonText() {\n    setIsLoading(true);\n  }\n\n  return /*#__PURE__*/_jsxDEV(CurrentUserContext.Provider, {\n    value: currentUser,\n    children: [/*#__PURE__*/_jsxDEV(Header, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 138,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Main, {\n      onCardClick: handleCardClick,\n      onEditProfileClick: handleEditProfileClick,\n      onAddPlaceClick: handleAddPlaceClick,\n      onEditAvatarClick: handleEditAvatarClick,\n      cards: cards,\n      onCardLike: handleCardLike,\n      onDeleteCardClick: handleDeleteCardClick\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 139,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Footer, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 140,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(EditProfilePopup, {\n      isOpen: isEditProfilePopupOpen,\n      onClose: closeAllPopups,\n      onUpdateUser: handleUpdateUser,\n      isLoading: isLoading,\n      onRenderLoading: handleChangeButtonText\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 141,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(AddPlacePopup, {\n      isOpen: isAddPlacePopupOpen,\n      onClose: closeAllPopups,\n      onAddPlaceSubmit: handleAddPlaceSubmit,\n      isLoading: isLoading,\n      onRenderLoading: handleChangeButtonText\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 142,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(EditAvatarPopup, {\n      isOpen: isEditAvatarPopupOpen,\n      onClose: closeAllPopups,\n      onUpdateAvatar: handleUpdateAvatar,\n      isLoading: isLoading,\n      onRenderLoading: handleChangeButtonText\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 143,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(DeleteCardPopup, {\n      cardToDelete: cardToDelete,\n      isOpen: isDeleteCardPopupOpen,\n      onClose: closeAllPopups,\n      onDeleteCardSubmit: handleCardDelete,\n      isLoading: isLoading,\n      onRenderLoading: handleChangeButtonText\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 144,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(ImagePopup, {\n      card: selectedCard,\n      onClose: closeAllPopups\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 145,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 137,\n    columnNumber: 5\n  }, this);\n}\n\n_s(App, \"eyC1G/xK0GsZQ/e487emx4jgK6Q=\");\n\n_c = App;\nexport default App;\n\nvar _c;\n\n$RefreshReg$(_c, \"App\");","map":{"version":3,"sources":["/Users/colinmaretsky/dev/react-around-auth/src/components/App.js"],"names":["React","Header","Main","Footer","EditProfilePopup","AddPlacePopup","EditAvatarPopup","DeleteCardPopup","ImagePopup","api","CurrentUserContext","App","isEditProfilePopupOpen","setIsEditProfilePopupOpen","useState","isAddPlacePopupOpen","setIsAddPlacePopupOpen","isEditAvatarPopupOpen","setIsEditAvatarPopupOpen","isDeleteCardPopupOpen","setIsDeleteCardPopupOpen","selectedCard","setSelectedCard","currentUser","setCurrentUser","cards","setCards","isLoading","setIsLoading","cardToDelete","setCardToDelete","useEffect","getUserInfo","then","res","catch","err","console","log","handleEditProfileClick","handleAddPlaceClick","handleEditAvatarClick","handleDeleteCardClick","clickedCard","closeAllPopups","handleCardClick","handleUpdateUser","info","setUserInfo","handleUpdateAvatar","setUserAvatar","handleAddPlaceSubmit","link","name","addCard","newCard","getCardList","handleCardLike","card","isLiked","likes","some","i","_id","addLike","state","map","c","removeLike","handleCardDelete","removeCard","filter","handleChangeButtonText"],"mappings":"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","sourcesContent":["import React from 'react';\nimport Header from './Header';\nimport Main from './Main';\nimport Footer from './Footer';\nimport EditProfilePopup from './EditProfilePopup';\nimport AddPlacePopup from './AddPlacePopup';\nimport EditAvatarPopup from './EditAvatarPopup';\nimport DeleteCardPopup from './DeleteCardPopup';\nimport ImagePopup from './ImagePopup';\nimport api from '../utils/api';\nimport { CurrentUserContext } from '../contexts/CurrentUserContext';\n\nfunction App() {\n\n  const [isEditProfilePopupOpen, setIsEditProfilePopupOpen] = React.useState(false);\n  const [isAddPlacePopupOpen, setIsAddPlacePopupOpen] = React.useState(false);\n  const [isEditAvatarPopupOpen, setIsEditAvatarPopupOpen] = React.useState(false);\n  const [isDeleteCardPopupOpen, setIsDeleteCardPopupOpen] = React.useState(false)\n  const [selectedCard, setSelectedCard] = React.useState();\n  const [currentUser, setCurrentUser] = React.useState();\n  const [cards, setCards] = React.useState([]);\n  const [isLoading, setIsLoading] = React.useState(false);\n  const[cardToDelete, setCardToDelete] = React.useState();\n\n\n  React.useEffect(() => {\n    api.getUserInfo()\n      .then(res => {\n        setCurrentUser(res)\n      })\n      .catch((err) => console.log(err))\n  }, []);\n\n\n  function handleEditProfileClick() {\n    setIsLoading(false);\n    setIsEditProfilePopupOpen(true);\n  }\n\n  function handleAddPlaceClick() {\n    setIsLoading(false);\n    setIsAddPlacePopupOpen(true);\n  }\n\n  function handleEditAvatarClick() {\n    setIsLoading(false);\n    setIsEditAvatarPopupOpen(true);\n  }\n\n  function handleDeleteCardClick(clickedCard) {\n    setIsLoading(false);\n    setIsDeleteCardPopupOpen(true)\n    setCardToDelete(clickedCard);\n  }\n\n  function closeAllPopups() {\n    setIsEditProfilePopupOpen(false);\n    setIsAddPlacePopupOpen(false);\n    setIsEditAvatarPopupOpen(false);\n    setIsDeleteCardPopupOpen(false);\n    setSelectedCard();\n  }\n\n  function handleCardClick(clickedCard) {\n    setSelectedCard(clickedCard);\n  }\n\n  function handleUpdateUser(info) {\n    api.setUserInfo(info)\n      .then((res) => {\n        setCurrentUser(res);\n        closeAllPopups();\n      })\n      .catch((err) => console.log(err));\n  }\n\n  function handleUpdateAvatar(info) {\n    api.setUserAvatar(info)\n      .then((res) => {\n        setCurrentUser(res);\n        closeAllPopups();\n      })\n      .catch((err) => console.log(err));\n  }\n\n  function handleAddPlaceSubmit({ link, name }) {\n    api.addCard({ link, name })\n      .then((newCard) => {\n        setCards([newCard, ...cards]);\n        closeAllPopups();\n      })\n      .catch((err) => console.log(err));\n  }\n\n  React.useEffect(() => {\n    api.getCardList()\n      .then(res => {\n        setCards(res);\n      })\n      .catch((err) => console.log(err));\n  }, []);\n\n  function handleCardLike(card) {\n    const isLiked = card.likes.some(i => i._id === currentUser?._id);\n    if (!isLiked) {\n      api.addLike(card._id, !isLiked)\n        .then((newCard) => {\n          setCards((state) => state.map((c) => c._id === card._id ? newCard : c));\n        })\n        .catch((err) => console.log(err));\n    } else {\n      api.removeLike(card._id, !isLiked)\n        .then((newCard) => {\n          setCards((state) => state.map((c) => c._id === card._id ? newCard : c));\n        })\n        .catch((err) => console.log(err));\n    }\n  }\n\n  function handleCardDelete(card) {\n    api.removeCard(card._id)\n      .then(() => {\n        setCards((state) => state.filter((c) => c._id !== card._id));\n        closeAllPopups();\n      })\n      .catch((err) => console.log(err));\n  }\n\n  function handleChangeButtonText() {\n    setIsLoading(true);\n  }\n\n\n\n\n  return (\n    <CurrentUserContext.Provider value={currentUser}>\n      <Header />\n      <Main onCardClick={handleCardClick} onEditProfileClick={handleEditProfileClick} onAddPlaceClick={handleAddPlaceClick} onEditAvatarClick={handleEditAvatarClick} cards={cards} onCardLike={handleCardLike} onDeleteCardClick={handleDeleteCardClick} />\n      <Footer />\n      <EditProfilePopup isOpen={isEditProfilePopupOpen} onClose={closeAllPopups} onUpdateUser={handleUpdateUser} isLoading={isLoading} onRenderLoading={handleChangeButtonText}/>\n      <AddPlacePopup isOpen={isAddPlacePopupOpen} onClose={closeAllPopups} onAddPlaceSubmit={handleAddPlaceSubmit} isLoading={isLoading} onRenderLoading={handleChangeButtonText}/>\n      <EditAvatarPopup isOpen={isEditAvatarPopupOpen} onClose={closeAllPopups} onUpdateAvatar={handleUpdateAvatar} isLoading={isLoading} onRenderLoading={handleChangeButtonText}/>\n      <DeleteCardPopup cardToDelete={cardToDelete} isOpen={isDeleteCardPopupOpen} onClose={closeAllPopups} onDeleteCardSubmit={handleCardDelete} isLoading={isLoading} onRenderLoading={handleChangeButtonText} />\n      <ImagePopup card={selectedCard} onClose={closeAllPopups} />\n    </CurrentUserContext.Provider>\n  );\n\n}\n\n\nexport default App;\n"]},"metadata":{},"sourceType":"module"}